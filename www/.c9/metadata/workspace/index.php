{"changed":true,"filter":false,"title":"index.php","tooltip":"/index.php","value":"\n<html>\n<head>\n<title> MQTT Websocket Test</title>\n</head>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js\" type=\"text/javascript\"></script>\n<script>\n\nfunction sub_mqtt_msg() {\n// Send an MQTT message\n  var mqtt_server = 'mqtt2';\n  var mqtt_port = 8000;\n  //var mqtt_server = document.getElementById(\"mqtt_server\").value;\n  //var mqtt_port = Number(document.getElementById(\"mqtt_port\").value);\n\n  client = new Paho.MQTT.Client(mqtt_server, mqtt_port,\"\");\n  client.onMessageArrived = onMessageArrived;\n  //client.onMessageArrived = onMessageArrived;\n  client.connect({onSuccess:onConnect});\n  document.getElementById(\"submsg\").innerHTML = \"Trying to connect... \"+mqtt_server+\":\"+mqtt_port;\n\n}\nfunction onConnect() {\n  document.getElementById(\"submsg\").innerHTML = \"New connection made...\";\n  var mqtt_destname = \"temp\";\n\n  //var mqtt_destname = document.getElementById(\"mqtt_destname\").value;  \n  client.subscribe(mqtt_destname);\n  document.getElementById(\"submsg\").innerHTML = \"Subscribing to topic: \" + mqtt_destname + \" ...\";\n}\nfunction onMessageArrived(message) {\n  var result = message.payloadString + \"&#8457;\";\n  document.getElementById(\"submsg\").innerHTML = result;\n}\n\n</script>\n<body onload=\"sub_mqtt_msg()\">\n<h1>MQTT Pond Temp</h1>\n<!--\nServer Name: <input type=\"text\" id=\"mqtt_server\" value=mqtt_server><br><br>\nWebsocket: <input type=\"text\" id=\"mqtt_port\" value=\"8185\"><br><br>\nDestinationName: <input type=\"text\" id=\"mqtt_destname\" value=\"temp\"><br><br>\n\n<button onclick=\"sub_mqtt_msg()\">Subscript to MQTT</button>\n-->\n\n<h3>Current Temp: <div id=submsg></div></h3>\n</body>\n\n</html>\n","undoManager":{"mark":-2,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":49,"column":0},"action":"insert","lines":["<html>","<head>","<title> MQTT Websocket Test</title>","</head>","<script src=\"https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js\" type=\"text/javascript\"></script>","<script>","","function sub_mqtt_msg() {","// Send an MQTT message","  var mqtt_server = 'mqtt2';","  var mqtt_port = 8000;","  //var mqtt_server = document.getElementById(\"mqtt_server\").value;","  //var mqtt_port = Number(document.getElementById(\"mqtt_port\").value);","","  client = new Paho.MQTT.Client(mqtt_server, mqtt_port,\"\");","  client.onMessageArrived = onMessageArrived;","  //client.onMessageArrived = onMessageArrived;","  client.connect({onSuccess:onConnect});","  document.getElementById(\"submsg\").innerHTML = \"Trying to connect... \"+mqtt_server+\":\"+mqtt_port;","","}","function onConnect() {","  document.getElementById(\"submsg\").innerHTML = \"New connection made...\";","  var mqtt_destname = \"temp\";","","  //var mqtt_destname = document.getElementById(\"mqtt_destname\").value;  ","  client.subscribe(mqtt_destname);","  document.getElementById(\"submsg\").innerHTML = \"Subscribing to topic: \" + mqtt_destname + \" ...\";","}","function onMessageArrived(message) {","  var result = message.payloadString + \"&#8457;\";","  document.getElementById(\"submsg\").innerHTML = result;","}","","</script>","<body onload=\"sub_mqtt_msg()\">","<h1>MQTT Pond Temp</h1>","<!--","Server Name: <input type=\"text\" id=\"mqtt_server\" value=mqtt_server><br><br>","Websocket: <input type=\"text\" id=\"mqtt_port\" value=\"8185\"><br><br>","DestinationName: <input type=\"text\" id=\"mqtt_destname\" value=\"temp\"><br><br>","","<button onclick=\"sub_mqtt_msg()\">Subscript to MQTT</button>","-->","","<h3>Current Temp: <div id=submsg></div></h3>","</body>","","</html>",""],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":["<"],"id":4}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1606938209536}